"use strict";const inputSelector=document.querySelector(".main__searcher-input"),btnSelector=document.querySelector(".main__searcher-btn"),listSelector=document.querySelector(".main__results-list");let favorites,li="";function searchIt(){listSelector.innerHTML="",fetch(`http://api.tvmaze.com/search/shows?q=${inputSelector.value}`).then(function(e){return e.json()}).then(function(e){if(0===e.length){const e='<div class="error-message">\n          <p>\n          No hemos encontrado ningÃºn resultado para tu bÃºsqueda ðŸ˜­, pero aquÃ­ tienes un unicornio ðŸ¦„ !!\n          </p>\n          </div>';listSelector.innerHTML=e}else for(let t=0;t<e.length;t++){const i=e[t].show,n=i.name;let s="";const o=`<div class="list-element" id="${n}">\n            <i class="favorite-btn fas fa-star-half"></i>\n            <a class="list-link" href="${i.url}">\n            <img class ="list-element-image" src="${s=i.image?i.image.medium:"https://via.placeholder.com/210x295/cccccc/666666/?text=TV"}" alt="cartel promocional de ${n}">\n            <h2 class="list-element-title">${n}</h2>\n            </a>\n            </div>`;(li=document.createElement("li")).innerHTML=o,listSelector.appendChild(li),favoriteClick(li,n)}}).catch(e=>console.log(`Â¡Upsi! Ha sucedido un error: ${e}`))}function favoriteClick(e,t){const i=e.querySelector(".list-element"),n=e.querySelector(".favorite-btn");for(let e=0;e<favorites.length;e++)favorites[e].includes(t)&&i.classList.add("favorite-element");n.addEventListener("click",favoriteIt)}function favoriteIt(){const e=this.parentElement;e.classList.toggle("favorite-element"),e.classList.contains("favorite-element")&&!favorites.includes(e.id)?favorites.push(e.id):favorites.splice(favorites.indexOf(e.id),1),localStorage.setItem("favorites",JSON.stringify(favorites))}favorites=localStorage.getItem("favorites")?JSON.parse(localStorage.getItem("favorites")):[],btnSelector.addEventListener("click",searchIt),inputSelector.addEventListener("keyup",function(e){13===e.keyCode&&searchIt()});